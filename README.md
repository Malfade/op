# Бот для оптимизации Windows

Этот бот создает скрипты для оптимизации работы Windows на основе скриншота системной информации.

## Требования

- Python 3.6 или выше
- Установленные библиотеки из `requirements.txt`
- Ключи API для Telegram и Claude (Anthropic)

## Установка

1. Установите необходимые зависимости:
```
pip install -r requirements.txt
```

2. Создайте файл `.env` с вашими ключами API:
```
TELEGRAM_BOT_TOKEN=ваш_токен_бота
ANTHROPIC_API_KEY=ваш_ключ_API_Anthropic
```

3. Подготовьте структуру директорий:
```
mkdir -p data/prompts
```

## Запуск бота

### PowerShell
В PowerShell используйте следующий синтаксис:
```
cd bot_optimixation; python optimization_bot.py
```
или
```
cd bot_optimixation
python optimization_bot.py
```

### Командная строка (CMD)
```
cd bot_optimixation && python optimization_bot.py
```

## Функции бота

- Создание скриптов оптимизации Windows на основе скриншота системы
- Исправление ошибок в существующих скриптах
- Показ статистики по сгенерированным скриптам
- Обновление шаблонов промптов на основе накопленных данных

## Команды бота

- `/start` - Начало работы с ботом
- `/help` - Помощь по использованию
- `/generate` - Сгенерировать новый скрипт оптимизации (нужно приложить фото)
- `/optimize` - Оптимизировать промпты (для администраторов)

## Устранение проблем

### Ошибка "Your credit balance is too low to access the Anthropic API"
Эта ошибка означает, что закончился баланс API-кредитов Anthropic. Бот автоматически переключится на использование шаблонных скриптов. Для полной функциональности необходимо пополнить баланс в аккаунте Anthropic.

### Ошибка запуска в PowerShell ("Лексема "&&" не является допустимым разделителем")
В PowerShell не работает оператор `&&` для объединения команд как в CMD. Используйте точку с запятой (`;`) или запускайте команды по отдельности:
```
cd bot_optimixation
python optimization_bot.py
```

Если при запуске скриптов возникают проблемы:

1. **Ошибки выполнения PowerShell**:
   - Убедитесь, что запускаете скрипт с правами администратора
   - Проверьте политику выполнения PowerShell: `Get-ExecutionPolicy`
   - При необходимости, измените политику: `Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process`

2. **Скрипт не запускается**:
   - Запустите командную строку от имени администратора
   - Перейдите в папку со скриптами: `cd путь_к_папке`
   - Запустите bat-файл вручную: `Start-Optimizer.bat`

3. **Система работает нестабильно после оптимизации**:
   - Все изменения фиксируются в логах, расположенных в `%USERPROFILE%\WindowsOptimizer_Logs`
   - Для откатов оптимизаций можно использовать точки восстановления системы
   - Резервные копии создаются в папке `%USERPROFILE%\WindowsOptimizer_Backups` 